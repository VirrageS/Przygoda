{% extends "layout.html" %}
{% block body %}

	{% macro render_field(field, placeholder=None) %}
		{% if field.errors %}
		<div>
		{% elif field.flags.error %}
		<div>
		{% else %}
		<div>
		{% endif %}

		{% set css_class = 'form-control ' + kwargs.pop('class', '') %}
		{{ field(class=css_class, placeholder=placeholder, **kwargs) }}
		</div>
	{% endmacro %}

	<h2>Stwórz przygodę</h2><br>

	{% with %}
		{% set location=(52.229937, 21.011380) %}
		{% set style="width:400px;height:400px;"%}

		{{
			googlemap(
				"przygoda",
				location.0, location.1,
				markers=all_coordinates,
				style=style
			)
		}}
	{% endwith %}

	<br>
	<form action="" method="post" name="new">
		{{ form.hidden_tag() }}

		<div class="control-group">
			<div class="controls">
				{{ render_field(form.date, placeholder="Data przygody", autofocus="") }}
			</div>
			<div class="control-group error">
				<small class="control-group error help-block">{{ form.date.errors[0] }}</small>
			</div>
		</div>

		<div class="control-group">
			<div class="controls">
				{{ render_field(form.info, placeholder="Informacje o przygodzie") }}
			</div>
			<div class="control-group error">
				<small class="control-group error help-block">{{ form.info.errors[0] }}</small>
			</div>
		</div>

		<div class="control-group">
			<div class="controls">
				<button type="submit" class="btn btn-success">Stwórz nową przygodę</button>
			</div>
		</div>
	</form>
{% endblock %}
